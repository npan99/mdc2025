<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simulador Mundial de Clubes 2025</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    body {
      background: black;
      color: white;
      font-family: sans-serif;
      padding: 2rem;
      text-align: center;
    }
    .groups-container {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 2rem;
      justify-content: center;
    }
    .group {
      background: #1a1a1a;
      padding: 1rem;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(255, 255, 255, 0.05);
      margin-bottom: 1rem;
    }
    .team {
      display: flex;
      align-items: center;
      margin: 0.5rem 0;
      padding: 0.5rem;
      border-radius: 4px;
      cursor: pointer;
      background: #333;
    }
    .team.selected-1 {
      background-color: #2a9d8f;
    }
    .team.selected-2 {
      background-color: #e9c46a;
    }
    .circle {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      margin-right: 0.5rem;
      flex-shrink: 0;
    }
  </style>
</head>
<body>
<h1>Mundial de Clubes 2025</h1>
<p>Seleccion치 los dos clasificados de cada grupo para avanzar a octavos</p>
<div class="groups-container" id="fixture"></div>
<div id="knockout"></div>
<script>
const teamColors = {
  "River Plate": ["white", "red"],
  "Flamengo": ["red", "black"],
  "Chelsea": ["blue", "white"],
  "Real Madrid": ["white", "gold"],
  "Boca Juniors": ["blue", "yellow"],
  "Palmeiras": ["green", "white"],
  "Manchester City": ["skyblue", "white"],
  "Al-Hilal": ["blue", "white"],
  "PSG": ["navy", "red"],
  "Monterrey": ["#00529F", "white"],
  "Porto": ["#001489", "white"],
  "Al-Ahly": ["red", "gold"],
  "Inter Miami": ["pink", "black"],
  "Atl칠tico Madrid": ["red", "white"],
  "Botafogo": ["black", "white"],
  "Seattle Sounders": ["#5D9731", "gold"],
  "Bayern M칰nich": ["red", "white"],
  "Auckland City": ["#000066", "white"],
  "Benfica": ["red", "white"],
  "Esperance": ["red", "yellow"],
  "Le칩n": ["green", "white"],
  "Urawa Red Diamonds": ["red", "black"],
  "Inter de Mil치n": ["black", "blue"],
  "Fluminense": ["brown", "green"],
  "Borussia Dortmund": ["yellow", "black"],
  "Ulsan HD": ["blue", "white"],
  "Mamelodi Sundowns": ["yellow", "green"],
  "Wydad Casablanca": ["red", "white"],
  "Al-Ain": ["purple", "white"],
  "Juventus": ["black", "white"],
  "Pachuca": ["orange", "white"],
  "Salzburgo": ["white", "blue"]
};
const groupsData = [
  ["Palmeiras", "Porto", "Al-Ahly", "Inter Miami"],
  ["PSG", "Atl칠tico Madrid", "Botafogo", "Seattle Sounders"],
  ["Bayern M칰nich", "Auckland City", "Boca Juniors", "Benfica"],
  ["Flamengo", "Chelsea", "Esperance", "Le칩n"],
  ["River Plate", "Monterrey", "Urawa Red Diamonds", "Inter de Mil치n"],
  ["Fluminense", "Borussia Dortmund", "Ulsan HD", "Mamelodi Sundowns"],
  ["Manchester City", "Wydad Casablanca", "Al-Ain", "Juventus"],
  ["Real Madrid", "Al-Hilal", "Pachuca", "Salzburgo"]
];

const fixture = document.getElementById("fixture");
const knockout = document.getElementById("knockout");
const selected = [];

function createTeamDiv(team, onClick) {
  const div = document.createElement("div");
  div.className = "team";
  const circle = document.createElement("div");
  circle.className = "circle";
  const [c1, c2] = teamColors[team] || ["gray", "gray"];
  circle.style.background = `linear-gradient(to right, ${c1} 50%, ${c2} 50%)`;
  div.appendChild(circle);
  div.append(team);
  if (onClick) div.addEventListener("click", onClick);
  return div;
}

function renderGroups() {
  groupsData.forEach((group, groupIndex) => {
    const groupDiv = document.createElement("div");
    groupDiv.className = "group";
    const title = document.createElement("h2");
    title.textContent = `Grupo ${String.fromCharCode(65 + groupIndex)}`;
    groupDiv.appendChild(title);

    let selections = [];

    group.forEach(team => {
      const div = createTeamDiv(team, () => {
        if (selections.includes(team)) {
          selections = selections.filter(t => t !== team);
          div.classList.remove("selected-1", "selected-2");
          selected.splice(selected.indexOf(team), 1);
        } else if (selections.length < 2) {
          selections.push(team);
          selected.push(team);
          div.classList.add(selections.length === 1 ? "selected-1" : "selected-2");
          if (selected.length === 16) renderOctavos();
        }
      });
      groupDiv.appendChild(div);
    });

    fixture.appendChild(groupDiv);
  });
}

function renderPhase(titleText, teams, nextCallback) {
  const title = document.createElement("h2");
  title.textContent = titleText;
  knockout.appendChild(title);

  const nextRound = [];

  for (let i = 0; i < teams.length; i += 2) {
    const match = document.createElement("div");
    match.className = "group";

    const team1 = teams[i];
    const team2 = teams[i + 1];

    const div1 = createTeamDiv(team1, () => {
      div1.classList.add("selected-1");
      div2.classList.remove("selected-1");
      nextRound[i / 2] = team1;
      if (nextRound.filter(Boolean).length === teams.length / 2) nextCallback(nextRound);
    });

    const div2 = createTeamDiv(team2, () => {
      div2.classList.add("selected-1");
      div1.classList.remove("selected-1");
      nextRound[i / 2] = team2;
      if (nextRound.filter(Boolean).length === teams.length / 2) nextCallback(nextRound);
    });

    match.appendChild(div1);
    match.appendChild(div2);
    knockout.appendChild(match);
  }
}

function renderOctavos() {
  knockout.innerHTML = "";
  const firsts = [], seconds = [];
  for (let i = 0; i < selected.length; i += 2) {
    firsts.push(selected[i]);
    seconds.push(selected[i + 1]);
  }
  const matchups = [
    [firsts[0], seconds[1]],
    [firsts[1], seconds[0]],
    [firsts[2], seconds[3]],
    [firsts[3], seconds[2]],
    [firsts[4], seconds[5]],
    [firsts[5], seconds[4]],
    [firsts[6], seconds[7]],
    [firsts[7], seconds[6]]
  ].flat();
  renderPhase("Octavos de Final", matchups, renderCuartos);
}

function renderCuartos(winners) {
  renderPhase("Cuartos de Final", winners, renderSemis);
}

function renderSemis(winners) {
  renderPhase("Semifinales", winners, renderFinal);
}

function renderFinal(winners) {
  renderPhase("Final", winners, (finalistas) => {
    const title = document.createElement("h2");
    title.textContent = `游끥 Campe칩n: ${finalistas[0]}`;
    knockout.appendChild(title);

    const btnContainer = document.createElement("div");
    btnContainer.style.marginTop = "2rem";

    const resetBtn = document.createElement("button");
    resetBtn.textContent = "游대 Reiniciar";
    resetBtn.style.margin = "0.5rem";
    resetBtn.onclick = () => location.reload();

    const shareBtn = document.createElement("button");
    shareBtn.textContent = "游닋 Compartir";
    shareBtn.style.margin = "0.5rem";
    shareBtn.onclick = () => {
      html2canvas(document.body).then(canvas => {
        canvas.toBlob(blob => {
          const form = new FormData();
          form.append("image", blob, "fixture.png");

          fetch("https://api.imgbb.com/1/upload?key=808a545e88d3bea6601c087cddeaafd3", {
            method: "POST",
            body: form
          })
          .then(res => res.json())
          .then(data => {
            const link = data.data.url;
            const text = `Esta es mi predicci칩n del Mundial de Clubes 2025 que hice en Bolavip: ${link}

쯌os ya hiciste la tuya? Hacela ac치 y compartila: https://mdc2025.vercel.app/`;
            const whatsappURL = `https://wa.me/?text=${encodeURIComponent(text)}`;
            window.open(whatsappURL, '_blank');
          });
        });
      });
    };

    btnContainer.appendChild(resetBtn);
    btnContainer.appendChild(shareBtn);
    knockout.appendChild(btnContainer);
  });
}

renderGroups();
</script>
</body>
</html>












